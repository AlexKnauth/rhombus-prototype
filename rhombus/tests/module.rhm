#lang rhombus

module combined:
  def c1 = 1

module combined:
  def c2 = 2
  export: c1 c2

module separate ~lang rhombus:
  def s1 = "s1"
  export s1

// This test will get run multiple times
// due to the `test` module
check:
  import:
    self!separate    
  separate.s1
  ~is "s1"
  
module ~late afterward ~lang rhombus:
  def a1 = "a1"
  export a1

// This `test` module is able to `eval` uses
// of the enclosing module
module test:
  check:
    import:
      parent!separate    
    separate.s1
    ~is "s1"
  
  check:
    ~eval
    import: rhombus/tests/module!afterward
    afterward.a1
    ~is "a1"

  check:
    ~eval
    import: rhombus/tests/module!combined
    [combined.c1, combined.c2]
    ~is [1, 2]
